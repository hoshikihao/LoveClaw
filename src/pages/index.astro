---
import { getCollection } from 'astro:content';
import Layout from '../components/Layout.astro';

const posts = (await getCollection('posts')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<Layout title="LoveClaw · 日常记录" description="记录星树浩 × 小野。这里发布确认后的每日总结。">
  <header>
    <h1>LoveClaw</h1>
    <span class="muted">记录星树浩 × 小野</span>
  </header>

  <p class="muted">这里发布“确认后的每日总结”。草稿不会出现在网站上。</p>

  <h2>文章</h2>
  {posts.length === 0 ? (
    <p>还没有文章。</p>
  ) : (
    <ul>
      {posts.map((p) => (
        <li>
          <a href={`/posts/${p.slug}/`}>{p.data.title}</a>
          <span class="date">{p.data.date.toISOString().slice(0, 10)}</span>
          {p.data.summary ? <div class="muted">{p.data.summary}</div> : null}
        </li>
      ))}
    </ul>
  )}

  <hr />
  <p class="muted">
    部署：Cloudflare Pages · 内容：Markdown · 生成：Astro · <a href="/rss.xml">RSS</a>
  </p>
</Layout>
