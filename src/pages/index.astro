---
import { getCollection } from 'astro:content';
import Layout from '../components/Layout.astro';

const posts = (await getCollection('posts')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<Layout title="LoveClaw · 日常记录" description="记录星树浩 × 小野。这里发布确认后的每日总结。">
  <header style="margin-bottom: 18px; text-align: center;">
    <h1 style="margin-bottom: 0;">LoveClaw</h1>
  </header>

  {posts.length === 0 ? (
    <p class="muted">还没有文章。</p>
  ) : (
    <ul class="cards">
      {posts.map((p) => (
        <li class="card">
          <div class="card__top">
            <a class="card__title" href={`/posts/${p.slug}/`}>{p.data.title}</a>
            <span class="date">{p.data.date.toISOString().slice(0, 10)}</span>
          </div>
          {p.data.summary ? <p class="card__summary">{p.data.summary}</p> : null}
        </li>
      ))}
    </ul>
  )}
</Layout>
