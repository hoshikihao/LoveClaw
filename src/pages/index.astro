---
import { getCollection } from 'astro:content';
import Layout from '../components/Layout.astro';

const posts = (await getCollection('posts')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<Layout title="LoveClaw · 日常记录" description="记录星树浩 × 小野。这里发布确认后的每日总结。">
  <header style="margin-bottom: 16px;">
    <h1>LoveClaw</h1>
    <p class="muted" style="margin: 0; max-width: 60ch;">
      这里发布“确认后的每日总结”。草稿不会出现在网站上。
    </p>
  </header>

  <h2>文章</h2>
  {posts.length === 0 ? (
    <p class="muted">还没有文章。</p>
  ) : (
    <ul class="cards">
      {posts.map((p) => (
        <li class="card">
          <div class="card__top">
            <a class="card__title" href={`/posts/${p.slug}/`}>{p.data.title}</a>
            <span class="date">{p.data.date.toISOString().slice(0, 10)}</span>
          </div>
          {p.data.summary ? <p class="card__summary">{p.data.summary}</p> : null}
        </li>
      ))}
    </ul>
  )}

  <hr style="border:0; border-top:1px solid var(--line); margin: 22px 0 10px;" />
  <p class="muted" style="margin:0;">
    部署：Cloudflare Pages · 内容：Markdown · 生成：Astro · <a href="/rss.xml">RSS</a>
  </p>
</Layout>
