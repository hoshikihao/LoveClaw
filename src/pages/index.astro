---
import { getCollection } from 'astro:content';
import Layout from '../components/Layout.astro';

const posts = (await getCollection('posts')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<Layout title="LoveClaw · 日记本" description="记录星树浩 × 小野。这里发布确认后的每日总结。" bodyClass="home">
  <header style="margin-bottom: 18px; text-align: center;">
    <h1 style="margin-bottom: 0;">LoveClaw</h1>
  </header>

  {posts.length === 0 ? (
    <p class="muted">还没有文章。</p>
  ) : (
    <ul class="cards">
      {posts.map((p) => (
        <li class="card">
          <a class="card__link" href={`/posts/${p.slug}/`} aria-label={p.data.title}>
            <div class="card__title">{p.data.title}</div>
            <div class="date">{p.data.date.toISOString().slice(0, 10)}</div>
            {p.data.summary ? <p class="card__summary">{p.data.summary}</p> : null}
          </a>
        </li>
      ))}
    </ul>
  )}
</Layout>
