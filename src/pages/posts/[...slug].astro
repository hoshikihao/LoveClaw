---
import { getCollection, render } from 'astro:content';
import Layout from '../../components/Layout.astro';

export async function getStaticPaths() {
  const posts = await getCollection('posts');
  return posts.map((post) => ({ params: { slug: post.slug }, props: { post } }));
}

const { post } = Astro.props;
const { Content } = await render(post);

const title = `${post.data.title} · LoveClaw`;
const description = post.data.summary;
const canonicalPath = `/posts/${post.slug}/`;
---

<Layout
  title={title}
  description={description}
  canonicalPath={canonicalPath}
  pageType="article"
  pubDate={post.data.date}
>
  <p><a href="/">← 返回首页</a></p>

  <header style="margin-bottom: 24px;">
    <h1>{post.data.title}</h1>
    <div class="muted">{post.data.date.toISOString().slice(0, 10)}</div>
    {post.data.summary ? <p class="muted">{post.data.summary}</p> : null}
  </header>

  <article>
    <Content />
  </article>
</Layout>
